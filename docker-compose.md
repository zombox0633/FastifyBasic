## MySQL เนื้อหาและคำอธิบายรายล่ะเอียด
อย่าลืมลง Extensions ชื่อ Database Client สำหรับสร้าง และ ดู DB 

https://hub.docker.com/

คือ การระบุรูปแบบของไฟล์ Docker Compose version ไหน
version: '3.8'  

ภายใน services จะเป็นการระบุบคอนเทนเนอร์และการตั้งค่าสำหรับบริการที่ต้องการ
services:

  เป็นการกำหนดชื่อของ service หรือคอนเทนเนอร์ในไฟล์ Docker
  mysql:

    ระบุ Docker เวอร์ชัน 8.0.31 ของ MySQL ที่จะใช้ในคอนเทนเนอร์ หรือจะใช้ เวอร์ชัน อื่นหรือ DB ตัวอื่นที่ต้องการแต่ Docker จะต้องลองรับ
    image: mysql:8.0.31

    เป็นการกำหนดชื่อของคอนเทนเนอร์ MySQL ที่เป็นเฉพาะเจาะจง ค่านี้จะใช้ในการระบุชื่อของคอนเทนเนอร์ใน Docker เมื่อคอนเทนเนอร์ถูกสร้างขึ้น และสามารถใช้ชื่อนี้ในการอ้างอิงคอนเทนเนอร์นี้เมื่อต้องการใช้งาน Docker CLI
    container_name: mysql

    กำหนดการส่งเสริมการเชื่อมต่อของ MySQL โดยที่เราให้คอนเทนเนอร์ฟังที่พอร์ต 3307 ของเครื่องเราเอง และส่งเสริมการเชื่อมต่อไปยังพอร์ต 3306 ของคอนเทนเนอร์ MySQL
    ports:
      - "3307:3306"

    Docker Compose สามารถใช้ส่วน volumes เพื่อกำหนดการแชร์ข้อมูลระหว่างคอนเทนเนอร์และโฮสต์ (หรือคอนเทนเนอร์อื่น ๆ) โดยสร้างบริเวณที่เก็บข้อมูลที่จะใช้ร่วมกันระหว่างพวกเขา 
    volumes:
      - vol:/var/lib/mysql

    กำหนดเครือข่ายที่คอนเทนเนอร์ MySQL จะเข้าร่วม และในที่นี้เรากำหนดชื่อเครือข่ายว่า "mysql" โดยเครือข่ายนี้จะเป็นเครือข่ายแบบ bridge ซึ่งเป็นค่าเริ่มต้น
    networks:
      - network

    หน้าที่ของ healthcheck คือการตรวจสอบสถานะของคอนเทนเนอร์เพื่อให้ระบบ Docker สามารถตรวจจับและจัดการกับคอนเทนเนอร์ที่ไม่สามารถทำงานได้อย่างถูกต้องหรือเสถียรได้
    โดยการใช้ healthcheck จะช่วยให้ Docker สามารถตรวจสอบสถานะของคอนเทนเนอร์ได้ว่ายังทำงานอยู่หรือไม่ หากคอนเทนเนอร์มีสถานะที่ไม่เป็นไปตามที่กำหนดใน healthcheck จะถือว่าคอนเทนเนอร์ไม่สามารถทำงานได้อย่างถูกต้อง
    healthcheck:

      test เป็นคำสั่งที่ใช้ในการตรวจสอบสถานะของคอนเทนเนอร์เพื่อตรวจสอบว่าคอนเทนเนอร์ยังทำงานอยู่หรือไม่ ในกรณีนี้ใช้คำสั่ง mysqladmin ping -h localhost เพื่อทดสอบการเชื่อมต่อกับ MySQL Server โดยใช้ mysqladmin เพื่อส่งคำสั่ง ping ไปยัง MySQL Server ที่เปิดใช้งานอยู่บนเครื่อง localhost
      test: [ "CMD", "mysqladmin" ,"ping", "-h", "localhost" ]

      timeout เป็นเวลาที่กำหนดในการรอรับการตอบสนองจากคำสั่งทดสอบ (test) ในกรณีนี้ถูกกำหนดเป็น 20 วินาที (20s) หากคำสั่งทดสอบไม่ได้รับการตอบสนองภายในเวลาที่กำหนด คอนเทนเนอร์จะถือว่าล้มเหลวในการตรวจสอบสถานะ
      timeout: 20s

      retries เป็นจำนวนครั้งที่จะพยายามในการรีทรายคำสั่งทดสอบ (test) หากคำสั่งทดสอบไม่ผ่านเป็นครั้งแรก คอนเทนเนอร์จะลองใหม่เป็นจำนวนครั้งที่กำหนด
      retries: 3

    เมื่อ Docker Compose ตรวจสอบสถานะของคอนเทนเนอร์โดยใช้ healthcheck แล้วหากคอนเทนเนอร์ไม่ผ่านการตรวจสอบสถานะ จะถือว่าคอนเทนเนอร์มีสถานะไม่ดีและ Docker Compose อาจทำการรีสตาร์ทคอนเทนเนอร์ใหม่ให้กับคอนเทนเนอร์นั้น ๆ ตามตัวอย่างที่กำหนดใน restart: on-failure

    ในการตั้งค่า Docker Compose หรือ Dockerfile นั่นหมายความว่าหากคอนเทนเนอร์ล้มเหลวหรือหยุดทำงานเนื่องจากข้อผิดพลาด (failure) หรือการทำงานไม่ถูกต้อง ระบบ Docker จะทำการรีสตาร์ทคอนเทนเนอร์ใหม่โดยอัตโนมัติ
    restart: on-failure

    environment:

      ตัวแปรที่ใช้กำหนดรหัสผ่านสำหรับผู้ใช้ root ในระบบฐานข้อมูล MySQL ที่กำลังถูกสร้างขึ้นในคอนเทนเนอร์ MySQL ผ่าน Docker.
      MYSQL_ROOT_PASSWORD: 123456

      กำหนดชื่อฐานข้อมูล MySQL ให้เป็น "mysql" ซึ่งเป็นฐานข้อมูลเริ่มต้นที่จะถูกสร้างในคอนเทนเนอร์ MySQL
      MYSQL_DATABASE: mysql

      กำหนดชื่อผู้ใช้ MySQL ให้เป็น "username" ซึ่งเป็นผู้ใช้ที่จะถูกสร้างในคอนเทนเนอร์ MySQL
      MYSQL_USER: username

      กำหนดรหัสผ่านของผู้ใช้ MySQL ให้เป็น "password" ซึ่งเป็นรหัสผ่านของผู้ใช้ MySQL ที่กำหนดใน MYSQL_USER
      MYSQL_PASSWORD: password

      กำหนดค่าเป็น "false" เพื่อไม่อนุญาตให้ใช้รหัสผ่านว่างสำหรับผู้ใช้ MySQL นั่นคือผู้ใช้ MySQL จะต้องมีรหัสผ่านที่ถูกกำหนด
      MYSQL_ALLOW_EMPTY_PASSWORD: false

      ใช้ในการกำหนดโซนเวลาของคอนเทนเนอร์ MySQL เพื่อให้ระบบฐานข้อมูลทำงานในโซนเวลาที่ถูกต้องตามท้องถิ่น
      การกำหนดโซนเวลาให้กับคอนเทนเนอร์ MySQL สำคัญเพราะโซนเวลามีผลต่อการบันทึกเวลาในฐานข้อมูล และการทำงานของฟังก์ชันเวลาใน MySQL เอง เช่นการสร้างวันที่และเวลา การจัดเก็บเวลาในฐานข้อมูล หรือการจัดการการแสดงผลเวลา
      TZ: Asia/Bangkok

เป็นส่วนที่ใช้กำหนดการเชื่อมต่อและการจัดเก็บข้อมูลของคอนเทนเนอร์
volumes:

  เป็นชื่อของ volume ที่กำหนด ในที่นี้เป็นชื่อ volume ว่า "vol"
  vol:

    เป็นการระบุว่าใช้ Local Volume Driver สำหรับเก็บข้อมูลบนเครื่องโฮสต์ที่กำหนด
    driver: local

    เป็นชื่อของ volume ที่กำหนดให้เป็น "mysql"
    name: mysql

เป็นส่วนที่ใช้กำหนดการเชื่อมต่อเครือข่ายของคอนเทนเนอร์
networks:

  เป็นชื่อของ network ที่กำหนด ในที่นี้เป็นชื่อ network ว่า "network"
  network:

    เมื่อกำหนด external: false นั้น Docker Compose จะไม่พยายามสร้าง network ใหม่ใน Docker เมื่อทำการรันคำสั่ง docker-compose up หาก network นี้ยังไม่ได้ถูกสร้างขึ้นจากนอก Docker Compose จะเกิดการใช้ network ที่มีอยู่แล้วหรือสร้างโดย Docker นอกเหนือจาก Docker Compose
    การกำหนด external: false สามารถใช้ในกรณีที่ต้องการให้ Docker Compose เชื่อมต่อกับ network ที่ถูกสร้างไว้แล้ว หรือสร้าง network ด้วยคำสั่ง Docker ภายนอก Docker Compose และต้องการให้คอนเทนเนอร์ใน Docker Compose เชื่อมต่อกับ network นั้นๆ
    external: false

    ระบุว่าใช้ Bridge network driver ที่จะให้คอนเทนเนอร์สามารถเชื่อมต่อกับเครือข่าย bridge ได้
    driver: bridge

    เป็นชื่อของ network ที่กำหนดให้เป็น "mysql"
    name: mysql


## รันคำสั่ง Docker Compose

docker-compose -f .\mysql-compose.yml up -d
* ใช้ในกรณีที่ไม่ได้ตั้งชื่อ docker-compose.yml

เป็นการรันคอนเทนเนอร์โดยระบุไฟล์ Docker Compose ที่ชื่อว่า mysql-compose.yml โดยใช้ -f เป็นตัวย่อของ --file เพื่อระบุตำแหน่งของไฟล์ .yml ที่ต้องการใช้งาน และ -d เป็นตัวย่อของ --detach เพื่อให้คอนเทนเนอร์ทำงานในพื้นหลัง (detached mode) โดยไม่แสดงผลลัพธ์ในที่เรียกใช้คำสั่ง (command prompt) ที่ใช้รันคำสั่งนี้ นี่คือวิธีที่สามารถรันคอนเทนเนอร์จากไฟล์ Docker Compose ที่ชื่อ mysql-compose.yml และให้ทำงานในพื้นหลังได้โดยไม่บังคับให้คอนเทนเนอร์แสดงผลลัพธ์ออกทางคอนโซล (console) ของที่เรียกใช้คำสั่ง


docker-compose up -d 
*ใช้ในกรณีที่ตั้งชื่อ docker-compose.yml
ใช้สำหรับเริ่มต้นคอนเทนเนอร์และบริการที่กำหนดในไฟล์ 

docker-compose down
ใช้สำหรับหยุดการทำงานของคอนเทนเนอร์และบริการที่กำหนดในไฟล์ docker-compose.yml

docker system prune
ใช้สำหรับลบรายการทรัพยากรที่ไม่ได้ใช้งานจาก Docker ทั้งหมด เช่น คอนเทนเนอร์ที่หยุดทำงานแล้ว รูปภาพ Docker ที่ไม่ได้ใช้งานและไม่มีการอ้างอิง และเครื่องหมายเครื่องหมายขยะอื่นๆ ซึ่งมีการติดตั้งอยู่ในระบบ Docker ของคุณ การใช้คำสั่งนี้จะช่วยลดขนาดข้อมูลที่ใช้จัดเก็บในระบบ Docker และคืนพื้นที่จัดเก็บกลับมาให้ใช้งานได้

docker volume prune
ช้สำหรับลบรายการโฟลเดอร์โปรเจกต์ที่เกี่ยวข้องกับ Docker Volumes ที่ไม่ได้ใช้งาน โดยลบโฟลเดอร์ที่ไม่มีการอ้างอิงจากคอนเทนเนอร์หรือบริการ Docker ใดๆ การใช้คำสั่งนี้จะช่วยลดพื้นที่จัดเก็บที่ใช้โดย Docker Volumes ที่ไม่ได้ใช้งาน และคืนพื้นที่จัดเก็บกลับมาให้ใช้งานได้


## MySQL

CREATE DATABASE mysql_db DEFAULT CHARACTER SET = 'utf8mb4';

CREATE TABLE table_items (id INT PRIMARY KEY, name VARCHAR(255), quantity INT)

INSERT INTO table_items (id, name, quantity)
VALUES (1, 'Item One', 10), (2, 'Item Two', 2), (3, 'Item Three', 3000), (4, 'Item four', 400);

SELECT * FROM table_items;
SELECT name, quantity FROM table_items WHERE id = 1;
